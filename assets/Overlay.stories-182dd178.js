var R=Object.defineProperty;var o=(e,t)=>R(e,"name",{value:t,configurable:!0});import{r as i,R as k}from"./index-d282687f.js";import{r as x}from"./index-dc4da288.js";import{a as v,j as n,F as L}from"./jsx-runtime-920531fb.js";import"./index-4b9426be.js";import{B}from"./button-c18c0757.js";import"./es.object.get-own-property-descriptor-fbf95828.js";import"./index-ed86a6de.js";const T={topLeft:["bl","tl"],top:["bc","tc"],topRight:["br","tr"],leftTop:["tr","tl"],left:["cr","cl"],leftBottom:["br","bl"],rightTop:["tl","tr"],right:["cl","cr"],rightBottom:["bl","br"],bottomLeft:["tl","bl"],bottom:["tc","bc"],bottomRight:["tr","br"]};console.log(T);function P({target:e,overlay:t}){console.log("🚀 ~ file: placement.ts:37 ~ getPlacement ~ overlay",t);const{width:l,height:r,left:u,top:s}=e.getBoundingClientRect();console.log("🚀 ~ file: placement.ts:38 ~ getPlacement ~ width",l);const{left:c,top:m}=document.body.getBoundingClientRect();console.log("🚀 ~ file: placement.ts:41 ~ getPlacement ~ cleft",c);const{scrollTop:d,scrollLeft:y}=document.body;return console.log("🚀 ~ file: placement.ts:43 ~ getPlacement ~ cScrollLeft",y),{position:"absolute",top:s+r-m+d,let:u}}o(P,"getPlacement");function g(e,t,l,r){i.useEffect(()=>{if(r)return e.addEventListener(t,l,!1),()=>{e.removeEventListener(t,l,!1)}},[r])}o(g,"useListener");const a=o(e=>{const{children:t,target:l,visible:r,hasMask:u,onVisibleChange:s}=e,[c,m]=i.useState(r||!1),d=i.useRef(null);i.useEffect(()=>{"visible"in e&&m(r)},[r]);const y=o(f=>{const p=[];d.current&&p.push(d.current);const w=f.target;for(let h=0;h<p.length;h++){const b=p[h];if(b&&b.contains(w))return}s==null||s(!1)},"handleMouseDown"),O=o(f=>{!c||!d.current||f.key==="Escape"&&(s==null||s(!1))},"handleKeyDown");g(window,"mousedown",y,c),g(window,"keydown",O,c);const _=i.useCallback(f=>{if(d.current=f,f&&l){const p=P({target:l});console.log(p)}},[]),S=k.Children.only(t),C=i.cloneElement(S,{ref:_}),E=x.createPortal(C,document.body);return c?v("div",{children:[u?n("div",{}):null,E]}):null},"Overlay");try{a.displayName="Overlay",a.__docgenInfo={description:"",displayName:"Overlay",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},hasMask:{defaultValue:null,description:"",name:"hasMask",required:!1,type:{name:"boolean"}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean"}},onVisibleChange:{defaultValue:null,description:"",name:"onVisibleChange",required:!1,type:{name:"((visible: boolean) => void)"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"HTMLElement"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Overlay/Overlay.tsx#Overlay"]={docgenInfo:a.__docgenInfo,name:"Overlay",path:"src/components/Overlay/Overlay.tsx#Overlay"})}catch{}const U={title:"Overlay",component:a},V=o(e=>n(a,{...e}),"Template"),M=V.bind({});M.args={children:n("div",{style:{border:"1px solid black",width:300,height:300},children:"content"})};const Y=o(()=>n(a,{children:n("div",{style:{border:"1px solid black",width:300,height:300},children:"Overlay"})}),"Basic"),H=o(()=>{const[e,t]=i.useState(!1);return v(L,{children:[n(B,{type:"primary",onClick:()=>t(!0),children:"Click"}),n("button",{id:"position",children:"定位元素"}),n(a,{target:document.getElementById("position"),visible:e,onVisibleChange:l=>t(l),children:n("div",{style:{border:"1px solid black",width:300,height:300,position:"absolute",top:200,left:200},children:"under control"})})]})},"UnderControl"),z=["Primary","Basic","UnderControl"];export{Y as Basic,M as Primary,H as UnderControl,z as __namedExportsOrder,U as default};
//# sourceMappingURL=Overlay.stories-182dd178.js.map
