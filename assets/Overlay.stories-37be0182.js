var L=Object.defineProperty;var o=(e,t)=>L(e,"name",{value:t,configurable:!0});import{a as v,j as n,F as B}from"./jsx-runtime-69008c6b.js";import{r as s,R as P}from"./index-a38f3d31.js";import{r as R}from"./index-b042d21f.js";import"./index-63a02ce5.js";import{B as V}from"./button-e140bd2d.js";import"./es.object.get-own-property-descriptor-d261b708.js";import"./index-ed86a6de.js";const S={topLeft:["bl","tl"],top:["bc","tc"],topRight:["br","tr"],leftTop:["tr","tl"],left:["cr","cl"],leftBottom:["br","bl"],rightTop:["tl","tr"],right:["cl","cr"],rightBottom:["bl","br"],bottomLeft:["tl","bl"],bottom:["tc","bc"],bottomRight:["tr","br"]};console.log(S);function M({target:e,overlay:t}){console.log("🚀 ~ file: placement.ts:37 ~ getPlacement ~ overlay",t);const{width:l,height:r,left:p,top:i}=e.getBoundingClientRect();console.log("🚀 ~ file: placement.ts:38 ~ getPlacement ~ width",l);const{left:a,top:m}=document.body.getBoundingClientRect();console.log("🚀 ~ file: placement.ts:41 ~ getPlacement ~ cleft",a);const{scrollTop:c,scrollLeft:b}=document.body;return console.log("🚀 ~ file: placement.ts:43 ~ getPlacement ~ cScrollLeft",b),{position:"absolute",top:i+r-m+c,let:p}}o(M,"getPlacement");function g(e,t,l,r){s.useEffect(()=>{if(r)return e.addEventListener(t,l,!1),()=>{e.removeEventListener(t,l,!1)}},[r])}o(g,"useListener");const u=o(e=>{const{children:t,target:l,visible:r,hasMask:p,onVisibleChange:i}=e,[a,m]=s.useState(r||!1),c=s.useRef(null);s.useEffect(()=>{"visible"in e&&m(r)},[r]);const b=o(d=>{const f=[];c.current&&f.push(c.current);const x=d.target;for(let h=0;h<f.length;h++){const y=f[h];if(y&&y.contains(x))return}i==null||i(!1)},"handleMouseDown"),w=o(d=>{!a||!c.current||d.key==="Escape"&&(i==null||i(!1))},"handleKeyDown");g(window,"mousedown",b,a),g(window,"keydown",w,a);const k=s.useCallback(d=>{if(c.current=d,d&&l){const f=M({target:l});console.log(f)}},[]),_=P.Children.only(t),C=s.cloneElement(_,{ref:k}),E=R.createPortal(C,document.body);return a?v("div",{children:[p?n("div",{}):null,E]}):null},"Overlay");try{u.displayName="Overlay",u.__docgenInfo={description:"",displayName:"Overlay",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},hasMask:{defaultValue:null,description:"",name:"hasMask",required:!1,type:{name:"boolean"}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean"}},onVisibleChange:{defaultValue:null,description:"",name:"onVisibleChange",required:!1,type:{name:"((visible: boolean) => void)"}},target:{defaultValue:null,description:"",name:"target",required:!1,type:{name:"HTMLElement"}}}}}catch{}const K={title:"Overlay",component:u},O=o(e=>n(u,{...e}),"Template"),q=O.bind({});q.args={children:n("div",{style:{border:"1px solid black",width:300,height:300},children:"content"})};const z=o(()=>n(u,{children:n("div",{style:{border:"1px solid black",width:300,height:300},children:"Overlay"})}),"Basic"),A=o(()=>{const[e,t]=s.useState(!1);return v(B,{children:[n(V,{type:"primary",onClick:()=>t(!0),children:"Click"}),n("button",{id:"position",children:"定位元素"}),n(u,{target:document.getElementById("position"),visible:e,onVisibleChange:l=>t(l),children:n("div",{style:{border:"1px solid black",width:300,height:300,position:"absolute",top:200,left:200},children:"under control"})})]})},"UnderControl"),G=["Primary","Basic","UnderControl"];export{z as Basic,q as Primary,A as UnderControl,G as __namedExportsOrder,K as default};
//# sourceMappingURL=Overlay.stories-37be0182.js.map
